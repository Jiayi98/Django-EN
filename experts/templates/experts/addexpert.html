{% extends "experts/base.html" %}
{% block content %}
<div class="container-fluid">
    <div class="control-group">
        <h5>添加专家</h5>
    </div>

    <div class="control-group" align="left">
        <form method="post" class="form-horizontal">
            {% csrf_token %}

            <div class="form-group row">
                <label for="ename" class="col-1 col-form-label"><a style="color: red">*</a>姓名：</label>
                <div class="col-2">
                    <input type="text" id="ename" name='ename' class="form-control" required>
                </div>
                <label for="emobile" class="col-1 col-form-label"><a style="color: red">*</a>电话：</label>
                <div class="col-2">
                    <input type="text" id="emobile" name="emobile" class="form-control" required>
                </div>

                <label for="eemail" class="col-1 col-form-label">邮 箱：</label>
                <div class="col-2">
                    <input type="text" id="eemail" name='eemail' class="form-control">
                </div>

                <label for="eqq" class="col-1 col-form-label">微 信：</label>
                <div class="col-2">
                    <input type="text" id="eqq" name='eqq' class="form-control">
                </div>
            </div>

            <div class="form-group row">
                <label for="etrade" class="col-1 col-form-label"><a style="color: red">*</a>行 业：</label>
                        <div class="col-2">
                            <select name="etrade" id="etrade" class="form-control" onchange="esubtrade_change(this)"></select>
                        </div>


                <label for="esubtrade" class="col-1 col-form-label"><a style="color: red">*</a>子行业：</label>
                <div class="col-2">
                    <select name="esubtrade" id="esubtrade" class="form-control"></select>
                </div>

                <script type="text/javascript" src="/Script/jquery-1.12.4.min.js"></script>
                <script type="text/javascript">
                    var data = {
                        etrade: [
                            {
                                "id": "农、林、牧、渔业",
                                "name": "农、林、牧、渔业"
                            },
                            {
                                "id": "采矿业",
                                "name": "采矿业"
                            },
                            {
                                "id": "制造业",
                                "name": "制造业"
                            },
                            {
                                "id": "电力、热力、燃气及水生产和供应业",
                                "name": "电力、热力、燃气及水生产和供应业"
                            },
                            {
                                "id": "建筑业",
                                "name": "建筑业"
                            },
                            {
                                "id": "批发和零售业",
                                "name": "批发和零售业"
                            },
                            {
                                "id": "交通运输、仓储和邮政业",
                                "name": "交通运输、仓储和邮政业"
                            },
                            {
                                "id": "住宿和餐饮业",
                                "name": "住宿和餐饮业"
                            },
                            {
                                "id": "信息传输、软件和信息技术服务业",
                                "name": "信息传输、软件和信息技术服务业"
                            },
                            {
                                "id": "金融业",
                                "name": "金融业"
                            },
                            {
                                "id": "房地产业",
                                "name": "房地产业"
                            },
                            {
                                "id": "租赁和商务服务业",
                                "name": "租赁和商务服务业"
                            },
                            {
                                "id": "科学研究和技术服务业",
                                "name": "科学研究和技术服务业"
                            },
                            {
                                "id": "水利、环境和公共设施管理业",
                                "name": "水利、环境和公共设施管理业"
                            },
                            {
                                "id": "居民服务、修理和其他服务业",
                                "name": "居民服务、修理和其他服务业"
                            },
                            {
                                "id": "教育",
                                "name": "教育"
                            },
                            {
                                "id": "卫生和社会工作",
                                "name": "卫生和社会工作"
                            },
                            {
                                "id": "文化、体育和娱乐业",
                                "name": "文化、体育和娱乐业"
                            }],
                        esubtrade: {
                            "农、林、牧、渔业": "100101#农业,100102#林业,100103#畜牧业,100104#渔业,100105#农林牧渔服务业",
                            "采矿业": "100201#煤炭开采和洗选业,100202#石油和天然气开采业,100203#黑色金属矿采选业,100204#有色金属矿采选业,100205#非金属矿采选业,100206#开采辅助活动,100207#其他采矿业",
                            "制造业": "100301#农副食品加工业,100302#食品制造业,100303#酒、饮料和精制茶制造业,100304#烟草制造业,100305#纺织业,100306#纺织服装、服饰业,100307#皮草、毛皮、羽毛及其制品和制造业,100308#木材加工和木、竹、藤、棕、草制品业,100309#家具制造业,100310#造纸和纸制品业,100311#印刷和记录媒介复制业,100312#文教、工美、体育和娱乐用品制造业,100313#石油加工、冶焦和核燃料加工业,100314#化学原料和化学制品制造业,100315#医药制造业,100316#化学纤维制造业,100317#橡胶和塑料制品业,100318#非金属矿物制品业100319#黑色金属冶炼和压延加工业,100320#有色金属冶炼和压延加工业,100321#金属制品业,100322#通用设备制造业,100323#专用设备制造业,100324#汽车制造业,100325#铁路、船舶、航空航天和其他运输设备制造业,100326#电器机械和器材制造业,100327#计算机、通信和其他电子设备制造业100328#仪器仪表制造业,100329#其他制造业,100330#废弃资源综合利用业,100331#金属制品、机械和设备修理业",
                            "电力、热力、燃气及水生产和供应业": "100401#电力、热力生产和供应业,100402#燃气生产和供应业,100403#水的生产和供应业",
                            "建筑业": "100501#房屋建筑业,100502#土木工程建筑业,100503#建筑安装业,100504#建筑饰物和其他建筑业",
                            "批发和零售业": "100601#批发业,100602#零售业",
                            "交通运输、仓储和邮政业": "100701#铁路运输业,100702#道路运输业,100703#水上运输业,100704#航空运输业,100705#管道运输业,100706#装卸搬运和运输代理业,100707#仓储业,100708#邮政业",
                            "住宿和餐饮业": "100801#住宿业,100809#餐饮业",
                            "信息传输、软件和信息技术服务业": "100901#电信、广播电视和卫星传输服务,100902#互联网和相关服务,100903#软件和信息技术服务业",
                            "金融业": "101001#货币金融服务,101002#资本市场服务,101003#保险业,101004#其他金融业",
                            "房地产业": "101101#房地产开发经营,101102#物业管理,101103#房地产中介服务,101104#自由房地产经营活动,101205#其他房地产业",
                            "租赁和商务服务业": "101201#租赁业,101202#商务服务业",
                            "科学研究和技术服务业": "101301#研究和试验发展,101302#专业技术服务业,101303#科技推广与应用服务业",
                            "水利、环境和公共设施管理业": "101401#水利管理业,101402#生态保护和环境治理业,101403#公共设施管理业",
                            "居民服务、修理和其他服务业": "101501#居民服务业,101502#机动车、电子产品和日用产品修理业,101503#其他服务业",
                            "教育": "101601#学前教育,101602#初等教育,101603#中等教育,101604#高等教育,101605#特殊教育,101606#技能培训、教育辅助及其他教育",
                            "卫生和社会工作": "101701#卫生,101702#社会工作",
                            "文化、体育和娱乐业": "101801#新闻和出版业,101802#广播、电视、电影和影视录音制作业,101803#文化艺术业,101804#体育,101805#娱乐业"
                        }


                    }
                    $(function () {
                        init_etrade(); // 初始化行业数据

                    })

                    function init_etrade() {
                        $("#esubtrade").empty()
                        $("#etrade").append("<option>请选择行业</option>");
                        var etradeArr = data.etrade;   // 得到行业数组
                        for(var i = 0; i < etradeArr.length; i++){
                            $("#etrade").append("<option value='" + etradeArr[i].id + "'>"+ etradeArr[i].name +"</option>");
                        }
                    }

                    function esubtrade_change(obj) {
                        $("#esubtrade").empty()
                        var value=obj.value;    // 获取选中的trade
                        // 根据trade的 id，找到对应的subtrade
                        var esubtradeData = data["esubtrade"][value];
                        // 解析subtrade数据
                        var esubtrades = esubtradeData.split(",");
                        // 添加 默认选项
                        $("#esubtrade").append("<option>---请选择子行业---</option>");
                        // 遍历数据对象
                        for(var i =0;i<esubtrades.length;i++){
                            var v = esubtrades[i].split("#");
                            var esubtradeId = v[0];
                            var esubtradeName = v[1];
                            $("#esubtrade").append("<option value='" + esubtradeName + "'>"+ esubtradeName +"</option>");
                        }
                    }

                </script>
                <label for="elocation" class="col-1 col-form-label">地点：</label>
                <div class="col-2">
                    <input type="text" id="elocation" name='elocation' class="form-control">
                </div>

                <label for="esex" class="col-1 col-form-label"><a style="color: red">*</a>性别：</label>
                <div class="col-2">
                    <select id="esex" name='esex' class="form-control" required>
                            <option selected>请选择</option>
                            <option>M</option>
                            <option>F</option>
                        </select>
                </div>
            </div>

            <div class="form-group row">

                <label for="ecomefrom" class="col-1 col-form-label">来源：</label>
                <div class="col-2">
                    <input type="text" id="ecomefrom" name='ecomefrom' class="form-control">
                </div>

                <label for="efee" class="col-1 col-form-label"><a style="color: red">*</a>咨询费：</label>
                <div class="col-2">
                    <input type="number" id="efee" value="0" name='efee' class="form-control" required>
                </div>

                <label for="estate" class="col-1 col-form-label">级别：</label>
                <div class="col-2">
                    <input type="number" id="estate" name='estate' class="form-control">
                </div>

                <label for="interview_num" class="col-1 col-form-label">访谈次数：</label>
                <div class="col-2">
                        <input type="number" id="interview_num" value="0" name='interview_num' class="form-control">
                </div>
            </div>

            <div>

            <div class="form-group row">
                <label for="eremark" class="col-1 col-form-label">备注：</label>
                <div class="col-11">
                    <textarea id="eremark" name='eremark' class="form-control" row="3"></textarea>
                </div>
            </div>

                <div class="form-group row">
                <label for="ebackground" class="col-1 col-form-label">背景：</label>
                <div class="col-11">
                    <textarea id="ebackground" name='ebackground' class="form-control" row="5"></textarea>
                </div>
            </div>

                <div class="form-group row">
                <label for="eupdated_by" class="col-1 col-form-label">添加人：</label>
                    <div class="col-2">
                            <input id="eupdated_by" type="text" name='eupdated_by' value="{{ user.username }}" class="form-control" required>
                    </div>
                </div>

                {% if error == 'error' %}
                    <div class="alert-danger" role="alert">
                        操作未成功请重新操作!(操作失败潜在原因：已存在同名同电话专家)
                    </div>
                {% endif %}
                <div class="control-group">
                    <button type="submit" class="btn btn-success btn-sm">提交</button>
                    &nbsp
                    <button type="reset" class="btn btn-warning btn-sm">重置</button>
                </div>
        </form>
    </div>
</div>
{% endblock content %}

